
@{
    ViewBag.Title = "Компании/Клиенты";
    Layout = "~/Views/Shared/_NewDesing.cshtml";
}

@section scripts
{
<script src="~/Scripts/Admin/adminController.js"></script>
<script src="~/Scripts/Admin/admmodule.js"></script>
}
@section links
{
    <link href="~/Content/admin.css" rel="stylesheet" />
}
<div class="topActions">
    <ul>
        <li data-bind="click:Admin.setView.bind($data, 'COMPANY'), css:{activeTop:Admin.currView('COMPANY')}" class="activeTop">Компании</li>
        <li data-bind="click:Admin.setView.bind($data, 'EVENT'), css:{activeTop:Admin.currView('EVENT')}" class="activeTop">События</li>
    </ul>
</div>
<div class="pageWrapper">
    <div class="pageView" data-bind="visible:Admin.currView('COMPANY')" style="display:none">
        <table class="table table-responsive table-striped">
            <thead>
            <tr>
                <th>#</th>
                <th>Инн</th>
                <th>Наименование</th>
                <th>Регион</th>
                <th>Договор</th>
                <th><button type="button" data-bind="click:Admin.addCompany"><i class="fa fa-plus-square" aria-hidden="true"></i></button></th>
            </tr>
            </thead>
            <tbody data-bind="foreach: Admin.companys">
            <tr>
                <td data-bind="text: id"></td>
                <td data-bind="text: Inn"></td>
                <td data-bind="text: CompanyName"></td>
                <td data-bind="text: Region"></td>
                <td data-bind="text: Offer"></td>
                <td><a data-bind="click:Admin.editCompany">Подробнее</a></td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="pageView" data-bind="visible:Admin.currView('EVENT')" style="display:none">
        Events
    </div>
    <div class="pageView" data-bind="visible:Admin.currView('EDIT')" style="display:none">
        <div class="panel panel-default">
            <div class="panel-heading" data-bind="with:Admin.currCompany"><p data-bind="text:'Компания: '+CompanyName()"></p></div>
            <div class="panel-body">
                <form action="/" method="post" data-bind="with:Admin.currCompany">
                    <fieldset>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="CompanyNameInput">Наименование компании:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="CompanyNameInput" data-bind="value:CompanyName"/>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <label for="InnInput">Инн:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="InnInput" data-bind="value:Inn"/>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <label for="KppInput">Кпп:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="KppInput" data-bind="value:Kpp"/>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <label for="OgrnInput">ОГРН:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="OgrnInput" data-bind="value:Ogrn"/>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <label for="RegionInput">Регион:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="RegionInput" data-bind="value:Region" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="AddressUrInput">Юр адрес:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="AddressUrInput" data-bind="value:UrAdress"/>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="AddressRealInput">Почтовый адрес:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="AddressRealInput" data-bind="value:RealAdress"/>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="DirectInput">Тип компании:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="DirectInput" data-bind="value:CompDirect"/>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="DirInput">Директор компании:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="DirInput" data-bind="value:Director"/>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="BuhInput">Глав. бух. компании:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="BuhInput" data-bind="value:Buh"/>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="OfferInput">Интерес компании:</label>
                                    <input class="form-control" type="text" name="CompanyName" id="OfferInput" data-bind="value:Offer"/>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="DescrInput">Описание и заметки компании:</label>
                                    <textarea class="form-control" id="DescrInput" data-bind="textInput:Descr"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <button class="btn btn-success btn-sm" data-bind="click:Admin.postCompany, visible:Admin.isNewCompany()"/>Сохранить
                            </div>
                        </div>
                        <hr/>
                        <p>Телефоны</p>
                        <div data-bind="with:Admin.currCompany">
                            <table class="table table-responsive">
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Наименование</th>
                                    <th>Телефон</th>
                                    <th>Действия</th>
                                </tr>
                                </thead>
                                <tbody data-bind="foreach:Telephones">
                                <tr data-bind="if: mode()=== Admin.displayMode.view">
                                    <td data-bind="text: Id"></td>
                                    <td data-bind="text: Title"></td>
                                    <td data-bind="text: PhoneNumber"></td>
                                    <td>
                                        <a>Редактировать</a>
                                        <a>Удалить</a>
                                    </td>
                                </tr>
                                <tr data-bind="if: mode()=== Admin.displayMode.edit">
                                    <td>New</td>
                                    <td>
                                        <input type="text" class="form-control" data-bind="value: Title" />
                                    </td>
                                    <td>
                                        <input type="tel" class="form-control" data-bind="value: PhoneNumber"/>
                                    </td>
                                    <td>
                                        <a>Сохранить</a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <hr/>
                        <p>Контакты</p>
                        <div data-bind="with:Admin.currCompany">
                            <div data-bind="foreach:PersonContacts">
                                <div class="row">
                                    <div class="col-md-1">
                                        <div class="form-group">
                                            <label for="persId">#</label>
                                            <input class="form-control" type="text" name="CompanyName" id="persId" data-bind="value: Id" />
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label for="PersNameInput">Наименование:</label>
                                            <input class="form-control" type="text" name="CompanyName" id="PersNameInput" data-bind="value:PersonName" />
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="PersPhoneInput">Телефон:</label>
                                            <input class="form-control" type="text" name="CompanyName" id="PersPhoneInput" data-bind="value:Phone" />
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label for="PersEmailInput">Телефон:</label>
                                            <input class="form-control" type="text" name="CompanyName" id="PersEmailInput" data-bind="value:Email" />
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Управление:</label><br />
                                            <button type="button" class="btn btn-success btn-sm">Сохранить</button>
                                            <button type="button" class="btn btn-warning btn-sm">Удалить</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>

</div>